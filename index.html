<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snooker App</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Welcome to Snooker App</h1>
    </header>
    <main>
        <section>
            <h2>snooker table</h2>
            <canvas id="snookerTable" width="900" height="450"></canvas>
            <div>
                <button id="cueBallButton">white ball position</button>
                <button id="targetBallButton">red ball position</button>
                <button id="undoButton">del the last ball</button>
            </div>
        </section>
    </main>
    <footer>
        <p>c 2025 Snooker App</p>
    </footer>
    <script>
        const canvas = document.getElementById('snookerTable');
        const ctx = canvas.getContext('2d');

        // 全局變數
        let isCueBallActive = false; // 是否準備放置白球
        let isTargetBallActive = false; // 是否準備放置紅球
        const balls = []; // 儲存球的位置

        // 繪製桌球?
        function drawTable() {
            ctx.fillStyle = '#007A33'; // 桌面顏色
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 10;
            ctx.strokeRect(0, 0, canvas.width, canvas.height);

            // 繪製洞口
            const holeRadius = 25;
            const holes = [
                { x: holeRadius, y: holeRadius },
                { x: canvas.width - holeRadius, y: holeRadius },
                { x: holeRadius, y: canvas.height - holeRadius },
                { x: canvas.width - holeRadius, y: canvas.height - holeRadius },
                { x: canvas.width / 2, y: holeRadius },
                { x: canvas.width / 2, y: canvas.height - holeRadius }
            ];

            ctx.fillStyle = '#000000';
            holes.forEach(hole => {
                ctx.beginPath();
                ctx.arc(hole.x, hole.y, holeRadius, 0, Math.PI * 2);
                ctx.fill();
            });

            // 繪製球
            balls.forEach(ball => {
                ctx.fillStyle = ball.color;
                ctx.beginPath();
                ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        // 按鍵事件
        document.getElementById('cueBallButton').onclick = () => {
            isCueBallActive = true;
            isTargetBallActive = false;
        };

        document.getElementById('targetBallButton').onclick = () => {
            isTargetBallActive = true;
            isCueBallActive = false;
        };

        document.getElementById('undoButton').onclick = () => {
            balls.pop(); // 移除最後一個球
            drawTable(); // 重新繪製桌子
        };

        // 鼠標事件
        canvas.onmousedown = (event) => {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            if (isCueBallActive) {
                balls.push({ x: x, y: y, radius: 15, color: '#FFFFFF' }); // 添加白球
                isCueBallActive = false; // 重置狀態
            } else if (isTargetBallActive) {
                balls.push({ x: x, y: y, radius: 15, color: '#FF0000' }); // 添加紅球
                isTargetBallActive = false; // 重置狀態
            }

            drawTable(); // 重新繪製桌子和球
        };

        drawTable(); // 初始繪製
    </script>
</body>
</html>